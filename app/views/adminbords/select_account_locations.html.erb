<!--
            Admins with permissions lvl-1 or lower are allower to access this page, customer-no
-->

<!--
select location to add to an  account
 -->

<h1 class="card-header shadow-sm">Select Customer's Account Locations</h1>

<div class="card w-50 ">
  <div class="card-body d-flex flex-row justify-content-between ">
    <div>
      <div>
        <h6 class="pt-3 pr-3"><%= @account.customer.bus_name %></h6>
        <h6 class="pr-3">Tel:&#160;<%= @account.customer.phone %></h6>
         <h6 class="pt-3 pr-3"><%=@account.email%></h6>
        <h6 class="pr-3"><%= @account.first_name %> <%= @account.last_name %></h6>
      </div>
    </div>
    <div>
      <h6 class="pt-3 pr-3"><%= @account.customer_number %></h6>
    </div>
  </div>
</div>

<%= paginate @locations %>
<%= form_tag  save_account_locations_path([@account], [:selected_location_ids]), method: :post do %>
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th scope="col">Customer's number</th>
        <th scope="col">Costomer's name</th>
        <th scope="col">Location's name</th>
        <th scope="col">Contact' name</th>
        <th scope="col">Contact's phone</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    <% @locations.each do |location| %>
      <%# @account.locations.each do |acc_location|%>
          <%# if acc_location != location %>
            <tr>
              <td><%= location.customer_number %></td>
              <td><%= location.customer.bus_name %></td>
              <td><%= location.name %></td>
              <td><%= location.contact__first_name %></td>
              <td><%= location.contact_phone%></td>
              <td><%= check_box_tag "selected_location_ids[]", location.id %></td>
            </tr>
          <%# end %>
        <%# end %>
    <% end %>
    </tbody>
  </table>
<%= submit_tag "Add Selected Locations" %>
<% end %>
<%= paginate @locations %>
